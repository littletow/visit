# Visit 项目

Visit 是展示和搜索文章的前端小程序工具。Visit 项目经历多个版本迭代。现在已经成熟和稳定。

Visit 项目在小程序端的二维码：

![豆子碎片](https://www.91demo.top/visit.webp#pic_center)

## 云环境版本

visit 使用小程序云环境，在云环境中存放文章的 md 文件，然后小程序调用云函数获取使用 towxml 包转换后的 json 数据，在小程序端进行渲染。新的 towxml 必须使用调试基础库 2.9.4 版本以上，才能正常显示。标签现在定义为语言属性。在搜索时，可以按照标签属性进行搜索，或者文章标题中含有的字符。在云环境开始收费后，转为服务器版本。服务器可操作空间更大。

## 服务器版本

visit 当前使用服务器版本，在后台服务器使用数据库存储 md 文件的数据。小程序调用接口从后台获取文件的数据，在前端使用 tomwxml 进行渲染。

注意：小程序端只进行文章的显示和搜索。 主要是上架审核。上传和管理文章等通过后台接口或工具。

markdown 文件数据，需要使用工具或者开放接口 API 上传到后台。

- 使用工具上传，工具请使用 [upart-go 项目](https://gitee.com/littletow/upart-go)
- 使用 API 接口上传，API 文档请访问[开放接口](https://www.91demo.top)

## 使用工具上传文章步骤

1，制作 markdown 文件
2，将文件放置到 files 文件夹中
3，调用工具上传文章

## 项目介绍

该项目主要是为了技术文章资料记录和分享，也是学习小程序的入门项目。小程序端首页只显示公开的和自己的文章资料，可通过关键字搜索资料，也可以使用快捷按钮检索资料。文章资料通过工具上传，如果需要公开资料，那么公开的资料需要审核，目前由我来做，主要是为了小程序上架审核以及被封风险需要。我的页面只有两个功能，一个是获取我的识别码，使用工具，或者开放接口需要用到此识别码，用作认证。另一个是看广告获取点数。上传文章是需要点数的。当公开的资料被其它用户浏览时，也可以获得点数。加入广告，是为了希望获取一点收益，承担一点我的服务器支出。

图片功能暂时未做。所以在 Markdown 文件中添加的图片链接在小程序端是无法打开的。主要考虑到图片既占用服务器磁盘，又占用大量流量，会造成服务器资费过高。

## 使用接口

- /vln，登录接口，小程序启动时调用，获取 openid。
- /mpt，获取我的点数信息接口，获取我拥有的豆子点数。
- /artl，获取资料列表，使用快捷按钮调用。
- /sart，根据关键字搜索资料，返回资料列表。
- /artd，获取 Markdown 文章详情内容。
- /icode，获取我的应用识别码，使用工具或调用开放接口时用到。
- /rsticode，重置应用识别码密约。
