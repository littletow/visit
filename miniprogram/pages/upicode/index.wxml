<!--pages/upicode/index.wxml-->
<view class="page">
  <view class="weui-form">
    <view class="weui-form__bd">
      <view class="weui-form__text-area">
        <h2 class="weui-form__title">上传识别码卡片模板</h2>
        <view class="weui-form__desc">卡片模板是用于识别码的底图，上传或调试卡片模板都将消耗1个点数。您上传的卡片模板被其他用户使用，您将获得点数奖励。默认样例仅作为参考。</view>
      </view>

      <view class="weui-form__control-area">
        <view class="weui-cells__group weui-cells__group_form">
          <view class="weui-cells__title">卡片模板描述</view>
          <view class="weui-cells weui-cells_form">
            <view class="weui-cell" hover-class="weui-cell_active">
              <view class="weui-cell__bd">
                <textarea class="weui-textarea" placeholder="请认真描述您的卡片模板，它将展示在模板列表中。" placeholder-class="weui-input__placeholder" rows="3" name="desc" value="{{desc}}" bindblur="bindDesc"></textarea>
              </view>
            </view>
          </view>
        </view>

        <!--上传图片模板-->
        <view class="weui-cells__group weui-cells__group_form">
          <view class="weui-cells__title">卡片信息</view>
          <view class="weui-cells weui-cells_form">
            <view class="weui-cell weui-cell_uploader">
              <view class="weui-cell__bd">
                <view class="weui-uploader">
                  <view class="weui-uploader__hd">
                    <view aria-role="option" class="weui-uploader__overview">
                      <view class="weui-uploader__title">图片信息</view>
                    </view>
                    <view class="weui-uploader__tips">
                      请选取2M内的图片，目前仅支持一张
                    </view>
                  </view>
                  <view class="weui-uploader__bd">
                    <view class="weui-uploader__files" id="uploaderFiles">
                      <block wx:for="{{files}}" wx:key="*this">
                        <view class="weui-uploader__file" bindtap="previewImage" id="{{item}}">
                          <image class="weui-uploader__img" src="{{item}}" mode="aspectFill" />
                        </view>
                      </block>
                    </view>
                    <view class="weui-uploader__input-box">
                      <view aria-role="button" aria-label="选择图片" class="weui-uploader__input" bindtap="chooseImage"></view>
                    </view>
                  </view>
                </view>
              </view>
            </view>
            <view class="weui-cell weui-cell_active">
              <view class="weui-cell__hd">
                <label class="weui-label">位置信息</label>
              </view>
              <view class="weui-cell__bd">
                <input class="weui-input" placeholder="请输入二维码位置信息" name="location" value="{{location}}" bindblur="bindLocation" />
              </view>
            </view>
            <view class="weui-cell weui-cell_active">
              <image style="width: 300px; height: 200px; background-color: #eeeeee;" mode="aspectFit" src="{{dgImg}}" bindtap="previewDebugImage"></image>
            </view>
            <view class="weui-cell weui-cell_active">
              <text>{{info}}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
    <view class="weui-form__ft">
      <view class="weui-form__tips-area">
        <view class="weui-form__tips">
          注意：二维码位置信息格式为(x,y,width,height)，请一定进行调试，因为在上传图片时会进行图片压缩，图片尺寸会有变化。请根据返回的图片尺寸计算二维码位置。
        </view>
      </view>
      <view class="weui-form__opr-area">
        <button aria-role="button" class="weui-btn weui-btn_default" bind:tap="previewSamplesImage">预览默认样例</button>
        <button aria-role="button" class="weui-btn weui-btn_default" bind:tap="debugCardTmpl">调试卡片模板</button>
        <button aria-role="button" class="weui-btn weui-btn_primary" bind:tap="uploadCardTmpl">提 交</button>
      </view>
    </view>
  </view>
</view>